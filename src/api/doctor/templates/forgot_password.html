<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
	<head>
		<meta charset='utf-8'>
		<meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=yes'>
		<link rel="stylesheet" href="{% static "css/style.css" %}">
		<title>Doctor Account Password Reset</title>
	</head>
	<body>
		<div id="change_password" class="password">
			<div id="notMatched" class="error_msg" style="display: none;">
				<div class="col-1">
					<img src="{% static "images/web_error_message_icon@2x.png" %}">
				</div>
				<div class="col-2">
					<span>Passwords do not match! please try again</span>
				</div>
			</div>

			<div id="img_logo" class="password-header">
				<img src="{% static "images/web_hoh_logo@2x.png" %}" style="width: 42px;">
			</div>

			<div class="password-form">
				<form method="POST" action=".">
					{% csrf_token %}
					<input id="field1" onkeyup="fnCheckPass(this);" name="password1" type="password" placeholder="New Password" />
					<span id="fieldicon1" onclick="input1()" class="field-icon fa-eye toggle-password"></span>
					<span class="clearfix"></span>
					<input id="field2" onkeyup="fnCheckPass(this);" name="password2" type="password" placeholder="Retype New Password" />
					<span  id="fieldicon2" onclick="input2()" class="field-icon fa-eye toggle-password"></span>
					<div id="message" class="error">
						<p id="letter" class="invalid">Min. 8 characters, including at least one UPPERCASE and
						lowercase character and at least one number.</p>
					</div>
					<br>
					<button id="btnConfirm" class="confirm" style="visibility: hidden;">Confirm</button>
				</form>
			</div>
		</div>
	</body>
	<script>
		var myInput = document.getElementById("field1");
		var letter = document.getElementById("letter");

		myInput.onfocus = function () {
			document.getElementById("message").style.display = "block";
			message.classList.remove("error");
		}

		function input1() {
				var x = document.getElementById("field1");
				var element = document.getElementById("fieldicon1");
				var letter = document.getElementById("letter");
				if (x.type === "password") {
					element.classList.add("fa-eye-slash");
					x.type = "text";
				} else {
					x.type = "password";
					element.classList.remove("fa-eye-slash");
				}
			}
		function input2() {
				var x = document.getElementById("field2");
				var element = document.getElementById("fieldicon2");
				if (x.type === "password") {
					element.classList.add("fa-eye-slash");
					x.type = "text";
				} else {
					x.type = "password";
					element.classList.remove("fa-eye-slash");
				}
			}

			function fnCheckPass(obj) {
					var lowerCaseLetters = /(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}/;
					if (obj.value.match(lowerCaseLetters)) {
						letter.classList.remove("invalid");
						letter.classList.add("valid");
					} else {
						letter.classList.remove("valid");
						letter.classList.add("invalid");
					}
					var txt1= document.getElementById('field1').value;
					var txt2 = document.getElementById('field2').value;
					if(txt1!="" && txt2!="" && obj.value.match(lowerCaseLetters)){
						if(txt1==txt2){
							document.getElementById('btnConfirm').style.visibility = "visible";
							document.getElementById('notMatched').style.display = "none";
							document.getElementById('notMatched').style.display = "none";
							document.getElementById('img_logo').style.display = "block";
							document.getElementById('change_password').classList.remove("password-error");
						}else{
							document.getElementById('btnConfirm').style.visibility = "hidden";
							document.getElementById('notMatched').style.display = "block";
							document.getElementById('notMatched').style.display = "block";
							document.getElementById('change_password').classList.add("password-error");
							document.getElementById('img_logo').style.display = "none";

						}
					}
			}

	</script>
</html>
